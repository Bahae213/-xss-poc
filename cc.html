<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Security Research: postMessage Testing</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
    .disclaimer {
      background-color: #fff8e1;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<div class="disclaimer">
  <h3>⚠️ Responsible Disclosure Notice</h3>
  <p>This tool is for <strong>authorized security testing only</strong>. Never test systems without explicit permission.</p>
</div>

<h2>postMessage Interface Tester</h2>
<p>This tool helps security researchers test message handling safely.</p>

<iframe id="target" src="about:blank" width="100%" height="500" style="border: 1px solid #ddd;"></iframe>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const iframe = document.getElementById('target');
  iframe.src = "https://example.com"; // Replace with authorized target
  
  // Safe message templates
  const testMessages = [
    { type: "TEST", data: "Security test message 1" },
    { type: "ANALYTICS", payload: { test: true } }
  ];

  iframe.onload = () => {
    console.log("[INFO] Testing message handling...");
    
    testMessages.forEach((msg, i) => {
      setTimeout(() => {
        try {
          iframe.contentWindow.postMessage(msg, iframe.src);
          console.log(`[TEST] Sent message ${i+1}`, msg);
        } catch (e) {
          console.warn(`[ERROR] Failed to send message ${i+1}:`, e);
        }
      }, 1000 * (i + 1));
    });
  };
});
</script>

</body>
</html>
